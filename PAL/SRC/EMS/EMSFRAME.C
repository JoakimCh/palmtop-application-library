/* --------------------------------------------------------------------
   Project: PAL: Palmtop Application Library
   Module:  EMSFRAME.C
   Author:  Gilles Kohl
   Started: 07. Oct. 95
   Subject: Get EMS frame segment
   -------------------------------------------------------------------- */

/* --------------------------------------------------------------------
                            msdos includes
   -------------------------------------------------------------------- */
#include <dos.h>

/* --------------------------------------------------------------------
                           local includes
   -------------------------------------------------------------------- */
#include "pal.h"
#include "palpriv.h"

/* --------------------------------------------------------------------
                           Functions
   -------------------------------------------------------------------- */

/* --------------------------------------------------------------------
   EmsFrameSeg
   Subject: Return segment address of the EMS frame
   -------------------------------------------------------------------- */
WORD EmsFrameSeg(void)
{
   union REGS regs;

   regs.h.ah = 0x41;
   int86(EMS_INT, &regs, &regs); /* call EMM */
   EmsErr = regs.h.ah;
   return EmsErr ? EMS_ERR : regs.x.bx;
}

